(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d64ce810"],{"79c5":function(e,t,a){},"79ea":function(e,t,a){"use strict";var n=a("79c5"),s=a.n(n);s.a},ba51:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search by title"},domProps:{value:e.username},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchUsers(t)},input:function(t){t.target.composing||(e.username=t.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){e.page=1,e.retrieveUsers()}}},[e._v(" Search ")])])])]),a("v-col",{attrs:{cols:"12",sm:"12",lg:"12"}},[a("v-card",{staticClass:"mx-auto",attrs:{tile:""}},[a("v-card-title",[e._v("Users")]),a("v-data-table",{attrs:{headers:e.headers,items:e.users,"hide-default-footer":""},scopedSlots:e._u([{key:"item.actions",fn:function(t){var n=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.makeadmin(n.id)}}},[e._v("mdi-account")])]}}],null,!0)})],1)],1),a("div",{staticClass:"col-md-12"},[a("b-pagination",{attrs:{"total-rows":e.count,"per-page":e.pageSize,"prev-text":"Prev","next-text":"Next"},on:{change:e.handlePageChange},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)],1)},s=[],r=(a("4160"),a("a15b"),a("d81d"),a("b0c0"),a("d3b7"),a("25f0"),a("159b"),a("1f57")),i=a("d4ec"),o=a("bee2"),u=a("c427"),c=a("c4c6"),l=function(){function e(){Object(i["a"])(this,e)}return Object(o["a"])(e,[{key:"getAll",value:function(e){return u["a"].get("/userlist",{params:e})}},{key:"makeadmin",value:function(e){return u["a"].get("/makeadmin?userid=".concat(e))}},{key:"create",value:function(e){return u["a"].post("/users",e,{headers:Object(c["a"])()})}},{key:"buyuser",value:function(e){return u["a"].post("/buyuser",e,{headers:Object(c["a"])()})}},{key:"makeuser",value:function(e){return u["a"].post("/checkowner",e,{headers:Object(c["a"])()})}},{key:"update",value:function(e,t){return u["a"].put("/users/".concat(e),t,{headers:Object(c["a"])()})}},{key:"delete",value:function(e){return u["a"].delete("/users/".concat(e),{headers:Object(c["a"])()})}},{key:"findByTitle",value:function(e){return u["a"].get("/users?title=".concat(e))}}]),e}(),d=new l,f={name:"Admin",data:function(){return{content:"",users:[],title:"",username:"",headers:[{text:"ID",sortable:!1,value:"id"},{text:"Username",align:"start",sortable:!1,value:"username"},{text:"Email",value:"email",sortable:!1},{text:"Roles",value:"rolelist",sortable:!1},{text:"Actions",value:"actions",sortable:!1}],totalPages:0,currentPage:1,page:1,count:0,pageSize:5}},methods:{addRoleListToUserList:function(e){e.forEach((function(e){e.rolelist=e.roles.map((function(e){return e.name})).join(", ")}))},getRequestParams:function(e,t,a){var n={};return e&&(n["username"]=e),t&&(n["page"]=t-1),a&&(n["size"]=a),n},refreshList:function(){this.retrieveUsers()},searchUsers:function(){this.page=1,this.retrieveUsers()},retrieveUsers:function(){var e=this,t=this.getRequestParams(this.username,this.page,this.pageSize);d.getAll(t).then((function(t){var a=t.data,n=a.userlist,s=a.totalItems;e.users=n,e.addRoleListToUserList(e.users),e.count=s,console.log(t.data)})).catch((function(e){console.log(e)}))},handlePageSizeChange:function(e){this.pageSize=e.target.value,this.page=1,this.retrieveUsers()},handlePageChange:function(e){this.page=e,this.retrieveUsers()},makeadmin:function(e){d.makeadmin(e),this.refreshList()},deleteUser:function(e){var t=this;d.delete(e).then((function(){t.refreshList()})).catch((function(e){console.log(e)}))}},mounted:function(){var e=this;r["a"].getAdminBoard().then((function(t){e.content=t.data}),(function(t){e.content=t.response&&t.response.data&&t.response.data.message||t.message||t.toString()})),this.retrieveUsers()}},m=f,h=(a("79ea"),a("2877")),p=a("6544"),v=a.n(p),g=a("b0af"),b=a("99d9"),k=a("62ad"),y=a("8fea"),C=a("132d"),x=Object(h["a"])(m,n,s,!1,null,null,null);t["default"]=x.exports;v()(x,{VCard:g["a"],VCardTitle:b["c"],VCol:k["a"],VDataTable:y["a"],VIcon:C["a"]})}}]);
//# sourceMappingURL=chunk-d64ce810.c41f20c7.js.map